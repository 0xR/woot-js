{"version":3,"sources":["woot/wstring.js"],"names":[],"mappings":"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","file":"woot/wstring.js","sourcesContent":["import R from 'ramda';\n\nimport WChar from './wchar';\n\n\nconst isDefined = R.complement(R.isNil);\n\n\n// makeEmptyWString :: WString\nconst makeEmptyWString = () => [WChar.wCharBeginning, WChar.wCharEnding];\n\n\n// show :: WString -> String\nconst show = (wString) => {\n  let i = 0;\n  let str = '';\n\n  for (; i < wString.length; i++) {\n    if (wString[i].isVisible) {\n      str += wString[i].alpha;\n    }\n  }\n\n  return str;\n};\n\n\n// -- insert before index i\n// -- insert 2 'x' \"abc\" -> abxc\n// insert :: Int -> WChar -> WString -> WString\nconst insert = R.insert;\n\n\n// indexOf :: WCharId -> WString -> Int | null\nconst indexOf = (id, wString) => {\n  const index = R.findIndex((wChar) => {\n    return WChar.compareWCharIds(id, wChar.id) === 0;\n  }, wString);\n\n  return index === -1 ? null : index;\n};\n\n\n// contains :: WCharId -> WString -> Bool\nconst contains = (id, wString) => {\n  return indexOf(id, wString) !== null;\n};\n\n\n// subsection :: WCharId -> WCharId -> WString -> WString\nconst subsection = (idA, idB, wString) => {\n  const indexA = indexOf(idA, wString);\n  const indexB = indexOf(idB, wString);\n\n  if (isDefined(indexA) && isDefined(indexB) && (indexA < indexB)) {\n    return R.slice(indexA + 1, indexB, wString);\n  }\n\n  return [];\n};\n\n\n// nthVisible :: Int -> WString -> WChar | null\nconst nthVisible = (i, wString) => {\n  let numFound = 0;\n  let j = 0;\n\n  if (i > wString.length) {\n    return null;\n  }\n\n  for (; numFound < i + 1; j++) {\n    if (!wString[j]) {\n      return null;\n    }\n\n    if (wString[j].isVisible) {\n      numFound++;\n    }\n  }\n\n  return wString[j - 1];\n};\n\n\n// hideChar :: WCharId -> WString -> WString\nconst hideChar = (id, wString) => {\n  const index = indexOf(id, wString);\n  const wChar = WChar.hide(wString[index]);\n\n  return index ? R.update(index, wChar, wString) : wString;\n};\n\n\nexport default {\n  // Construction\n  makeEmptyWString,\n\n  // General WString operations\n  show,\n  indexOf,\n  insert,\n  subsection,\n  contains,\n  nthVisible,\n\n  // Special utilities\n  hideChar\n};\n"],"sourceRoot":"/source/"}